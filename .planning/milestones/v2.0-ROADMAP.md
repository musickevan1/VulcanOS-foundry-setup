# Milestone v2.0: Vulcan Appearance Manager

**Status:** SHIPPED 2026-01-30
**Phases:** 6-10
**Total Plans:** 28

## Overview

Unified theme and wallpaper management with preset theme bundles and consistent theming across all VulcanOS tools. Merged vulcan-theme-manager and vulcan-wallpaper-manager into single cohesive application with theme-wallpaper binding, unified profiles, and complete desktop theming infrastructure.

## Phases

### Phase 6: Foundation Architecture

**Goal:** Establish unified codebase with hardened state management, backend abstraction, and shared theming infrastructure
**Depends on:** Phase 5 (existing apps to merge)
**Requirements:** INFRA-08
**Success Criteria:**
1. vulcan-appearance-manager crate exists with merged models from both existing apps
2. State management follows explicit transitions (Idle/Previewing/Applying) with live system as truth
3. Wallpaper backend abstraction supports both swww and hyprpaper via trait
4. Theme parser validates bash scripts before parsing and rejects malformed themes
5. Shared CSS module provides single source of truth for Vulcan brand colors

Plans:
- [x] 06-01-PLAN.md - Rename crate and merge theme models/services
- [x] 06-02-PLAN.md - Shared brand CSS module
- [x] 06-03-PLAN.md - Explicit state machine (AppState)
- [x] 06-04-PLAN.md - Wallpaper backend trait abstraction
- [x] 06-05-PLAN.md - Theme parser hardening and validation

### Phase 7: Component Integration

**Goal:** Tab-based UI merges existing theme and wallpaper components into single cohesive application
**Depends on:** Phase 6
**Requirements:** APP-01, APP-02, APP-03, APP-05, APP-06, APP-07, APP-08
**Success Criteria:**
1. User can launch vulcan-appearance-manager from menu or CLI (replaces both old apps)
2. App displays tabs for Themes and Wallpapers in single window using libadwaita ViewStack
3. Theme browser shows color preview cards for all available themes
4. Wallpaper tab shows per-monitor layout with current assignments
5. User can assign different wallpapers to each monitor
6. User can split panoramic images across multiple monitors
7. Theme editor allows editing all 50+ color variables in groups
8. Memory usage remains stable during repeated previews

Plans:
- [x] 07-01-PLAN.md - App shell with ViewStack + ViewSwitcher navigation
- [x] 07-02-PLAN.md - Migrate theme UI components (browser, card, preview, editor)
- [x] 07-03-PLAN.md - Create ThemeView container and integrate into ViewStack
- [x] 07-04-PLAN.md - Create WallpaperView container and integrate into ViewStack
- [x] 07-05-PLAN.md - Final integration, polish, and desktop entry

### Phase 8: Theme-Wallpaper Binding

**Goal:** Themes suggest wallpapers and unified profiles save coordinated appearance as single unit
**Depends on:** Phase 7
**Requirements:** BIND-01, BIND-02, BIND-03, BIND-04, BIND-05, BIND-06, APP-04
**Success Criteria:**
1. Each theme file includes optional THEME_WALLPAPER field for suggested wallpaper path
2. Selecting a theme displays its suggested wallpaper thumbnail
3. User can apply theme's suggested wallpaper with one click from theme browser
4. User can override theme's suggested wallpaper with custom choice
5. Unified profiles save theme ID + wallpaper configuration + binding mode together
6. User can save/load/delete unified profiles by name from profiles tab
7. Theme browser shows suggested wallpaper thumbnail for each theme card

Plans:
- [x] 08-01-PLAN.md - BindingMode enum, UnifiedProfile model, theme parser THEME_WALLPAPER extraction
- [x] 08-02-PLAN.md - Unified profile storage with migration from old format
- [x] 08-03-PLAN.md - Theme card wallpaper thumbnail overlay
- [x] 08-04-PLAN.md - Binding dialog for "Apply theme wallpaper?" confirmation
- [x] 08-05-PLAN.md - Profiles tab with profile cards (save/load/delete)
- [x] 08-06-PLAN.md - Integration wiring and human verification

### Phase 9: Theming Infrastructure

**Goal:** Theme changes propagate automatically to all desktop components with self-theming GUI
**Depends on:** Phase 8
**Requirements:** INFRA-01, INFRA-02, INFRA-03, INFRA-04, INFRA-05, INFRA-06, INFRA-07
**Success Criteria:**
1. Theme changes propagate to waybar status bar colors
2. Theme changes propagate to wofi launcher colors
3. Theme changes propagate to swaync notification center colors
4. Theme changes propagate to hyprlock lock screen colors
5. Theme changes propagate to kitty terminal colors
6. Theme changes propagate to alacritty terminal colors
7. Appearance Manager GUI uses current active theme colors

Plans:
- [x] 09-01-PLAN.md - Verify and fix theme propagation chain to all 6 components
- [x] 09-02-PLAN.md - GTK CSS generation for active theme
- [x] 09-03-PLAN.md - App self-theming integration (CssProvider runtime loading)
- [x] 09-04-PLAN.md - Human verification of complete theming infrastructure

### Phase 10: Preset Themes & Desktop Integration

**Goal:** Polished preset themes with matching wallpapers, third-party app discovery, and complete desktop integration
**Depends on:** Phase 9
**Requirements:** PRESET-01 through PRESET-06, THIRD-01 through THIRD-04, DESK-01 through DESK-03
**Success Criteria:**
1. 8-10 polished preset themes exist with distinct visual personalities
2. Each preset theme includes at least one matching wallpaper in library
3. Well-known themes use community wallpapers from sources
4. Custom VulcanOS themes have AI-generated wallpapers pre-bundled
5. Wallpaper library stored in dotfiles/wallpapers/ directory structure
6. Wallpaper library files tracked in Git for backup and sync
7. App scans for installed apps that support theming
8. Discovery tab shows theming status for each app
9. App provides clickable links to theme marketplaces
10. Appearance Manager accessible from vulcan-menu Appearance submenu
11. .desktop file created and installed for application launchers
12. App binary and configs synced to archiso skeleton for fresh installs

Plans:
- [x] 10-01-PLAN.md - Polish existing 8 preset themes with official palettes
- [x] 10-02-PLAN.md - Add 2 light theme variants (Catppuccin Latte, Gruvbox Light)
- [x] 10-03-PLAN.md - Create wallpaper library and curate community wallpapers
- [x] 10-04-PLAN.md - Implement third-party app discovery service
- [x] 10-05-PLAN.md - Create discovery section UI component
- [x] 10-06-PLAN.md - Update vulcan-menu with Appearance submenu
- [x] 10-07-PLAN.md - Sync themes and configs to archiso skeleton
- [x] 10-08-PLAN.md - Human verification checkpoint

---

## Milestone Summary

**Key Decisions:**

- Renamed vulcan-wallpaper-manager to vulcan-appearance-manager as unified base (wallpaper codebase more mature)
- ViewStack instead of TabView for fixed application views (Themes/Wallpapers)
- BindingMode enum with three states: ThemeBound, CustomOverride, Unbound
- THEME_WALLPAPER must be relative path for security (reject absolute paths)
- UnifiedProfile extends WallpaperProfile with theme_id and binding_mode
- GTK CSS path: ~/.config/vulcan/current-theme.css
- STYLE_PROVIDER_PRIORITY_USER (600) for runtime CSS override
- Official color palettes without modification for authenticity

**Issues Resolved:**

- Two separate apps merged into unified experience
- Theme changes now propagate to all 6 desktop components
- Profile system extended to save theme + wallpaper together
- Self-theming GUI matches active theme

**Tech Debt Incurred:**

- AppState state machine created but not integrated into UI components
- parse_and_validate() security function exists but bypassed by theme_storage.rs
- BindingMode transition from ThemeBound to CustomOverride on manual wallpaper change not implemented
- 7 of 10 themes missing wallpapers (LICENSE files document sources for manual addition)

---

*For current project status, see .planning/ROADMAP.md*
*Archived: 2026-01-30*
