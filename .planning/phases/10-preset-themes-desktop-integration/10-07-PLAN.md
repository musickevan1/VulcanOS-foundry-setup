---
phase: 10-preset-themes-desktop-integration
plan: 07
type: execute
wave: 3
depends_on: ["10-01", "10-02", "10-03", "10-05"]
files_modified:
  - archiso/airootfs/etc/skel/.config/themes/colors/catppuccin-mocha.sh
  - archiso/airootfs/etc/skel/.config/themes/colors/catppuccin-latte.sh
  - archiso/airootfs/etc/skel/.config/themes/colors/gruvbox-light.sh
  - archiso/airootfs/usr/local/bin/vulcan-menu
  - archiso/airootfs/usr/share/applications/vulcan-appearance-manager.desktop
autonomous: true

must_haves:
  truths:
    - "All 10 themes synced to archiso skeleton"
    - "Updated vulcan-menu synced to archiso"
    - ".desktop file exists for application launchers"
    - "Fresh installs will have complete theming setup"
  artifacts:
    - path: "archiso/airootfs/etc/skel/.config/themes/colors/"
      provides: "Theme files for fresh installs"
    - path: "archiso/airootfs/usr/local/bin/vulcan-menu"
      provides: "Updated menu for fresh installs"
    - path: "archiso/airootfs/usr/share/applications/vulcan-appearance-manager.desktop"
      provides: "Desktop entry for app launchers"
  key_links:
    - from: "dotfiles/themes/colors/*.sh"
      to: "archiso/airootfs/etc/skel/.config/themes/colors/*.sh"
      via: "file sync"
      pattern: "THEME_ID"
---

<objective>
Sync all theme files, wallpapers, and configurations to archiso skeleton for fresh installs

Purpose: Ensure fresh VulcanOS installations include all preset themes, wallpapers, and updated menu
Output: Complete archiso skeleton with Phase 10 artifacts
</objective>

<execution_context>
@/home/evan/.claude/get-shit-done/workflows/execute-plan.md
@/home/evan/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/phases/10-preset-themes-desktop-integration/10-CONTEXT.md

Reference existing archiso structure:
@/home/evan/VulcanOS/archiso/airootfs/etc/skel/.config/themes/colors/
</context>

<tasks>

<task type="auto">
  <name>Task 1: Sync theme files to archiso skeleton</name>
  <files>
    archiso/airootfs/etc/skel/.config/themes/colors/catppuccin-mocha.sh
    archiso/airootfs/etc/skel/.config/themes/colors/catppuccin-latte.sh
    archiso/airootfs/etc/skel/.config/themes/colors/dracula.sh
    archiso/airootfs/etc/skel/.config/themes/colors/nord.sh
    archiso/airootfs/etc/skel/.config/themes/colors/gruvbox-dark.sh
    archiso/airootfs/etc/skel/.config/themes/colors/gruvbox-light.sh
    archiso/airootfs/etc/skel/.config/themes/colors/tokyonight.sh
    archiso/airootfs/etc/skel/.config/themes/colors/rosepine.sh
    archiso/airootfs/etc/skel/.config/themes/colors/onedark.sh
    archiso/airootfs/etc/skel/.config/themes/colors/vulcan-forge.sh
  </files>
  <action>
Sync all 10 theme files from dotfiles to archiso skeleton:

```bash
# Source directory
SRC="dotfiles/themes/colors"

# Destination directory
DEST="archiso/airootfs/etc/skel/.config/themes/colors"

# Ensure destination exists
mkdir -p "$DEST"

# Copy all theme files
for theme in catppuccin-mocha catppuccin-latte dracula nord gruvbox-dark gruvbox-light tokyonight rosepine onedark vulcan-forge; do
    cp "${SRC}/${theme}.sh" "${DEST}/${theme}.sh"
done
```

Verify each file:
1. Has correct THEME_ID
2. Has THEME_WALLPAPER reference
3. Has 30+ color exports
  </action>
  <verify>
    `ls archiso/airootfs/etc/skel/.config/themes/colors/*.sh | wc -l` returns 10
    `grep -l "THEME_ID" archiso/airootfs/etc/skel/.config/themes/colors/*.sh | wc -l` returns 10
  </verify>
  <done>All 10 theme files synced to archiso skeleton</done>
</task>

<task type="auto">
  <name>Task 2: Sync vulcan-menu and verify .desktop file</name>
  <files>
    archiso/airootfs/usr/local/bin/vulcan-menu
    archiso/airootfs/usr/share/applications/vulcan-appearance-manager.desktop
  </files>
  <action>
1. Copy updated vulcan-menu to archiso:
```bash
cp dotfiles/scripts/.local/bin/vulcan-menu archiso/airootfs/usr/local/bin/vulcan-menu
chmod +x archiso/airootfs/usr/local/bin/vulcan-menu
```

2. Verify vulcan-appearance-manager.desktop exists and is correct:
```bash
cat archiso/airootfs/usr/share/applications/vulcan-appearance-manager.desktop
```

Expected content (already exists from earlier phases):
```desktop
[Desktop Entry]
Version=1.0
Type=Application
Name=Appearance Manager
GenericName=Theme and Wallpaper Manager
Comment=Manage VulcanOS themes and wallpapers
Exec=vulcan-appearance-manager
Icon=preferences-desktop-theme
Terminal=false
Categories=Settings;DesktopSettings;GTK;
Keywords=theme;wallpaper;appearance;color;desktop;
StartupNotify=true
```

3. Remove old vulcan-wallpaper-manager.desktop if it exists:
```bash
rm -f archiso/airootfs/usr/share/applications/vulcan-wallpaper-manager.desktop
```

4. Verify no old vulcan-theme-manager.desktop exists:
```bash
test ! -f archiso/airootfs/usr/share/applications/vulcan-theme-manager.desktop
```
  </action>
  <verify>
    `grep "Appearance Manager" archiso/airootfs/usr/local/bin/vulcan-menu` returns lines
    `test -f archiso/airootfs/usr/share/applications/vulcan-appearance-manager.desktop && echo "exists"`
    `test ! -f archiso/airootfs/usr/share/applications/vulcan-wallpaper-manager.desktop && echo "removed"`
  </verify>
  <done>vulcan-menu and .desktop file synced, old manager entries removed</done>
</task>

<task type="auto">
  <name>Task 3: Create archiso wallpapers directory with placeholder</name>
  <files>
    archiso/airootfs/etc/skel/.local/share/wallpapers/README.md
  </files>
  <action>
Create wallpapers directory in archiso skeleton:

```bash
# Create wallpapers directory for user
mkdir -p archiso/airootfs/etc/skel/.local/share/wallpapers
```

Create README.md explaining wallpaper locations:
```markdown
# VulcanOS Wallpapers

Wallpapers for the Vulcan Appearance Manager.

## Default Location

Theme-matched wallpapers are stored in:
- System: /usr/share/vulcanos/wallpapers/
- User: ~/.local/share/wallpapers/

## Adding Wallpapers

1. Place images in this directory
2. Open Appearance Manager
3. Select wallpapers in the Wallpapers tab

## Theme Wallpapers

Each theme can suggest a default wallpaper via the THEME_WALLPAPER
variable in its color file (~/.config/themes/colors/*.sh).

For more wallpapers, visit:
- https://github.com/zhichaoh/catppuccin-wallpapers
- https://draculatheme.com/wallpaper
- https://github.com/linuxdotexe/nordic-wallpapers
```

Note: The actual wallpaper images from dotfiles/wallpapers/ will be large for the ISO.
For ISO size optimization, consider:
- Including only 1 wallpaper per theme in archiso
- OR creating a separate wallpaper package
- OR documenting download locations in README

For now, create the structure and README. Wallpaper images can be added to a future archiso build step.
  </action>
  <verify>
    `test -d archiso/airootfs/etc/skel/.local/share/wallpapers && echo "dir exists"`
    `test -f archiso/airootfs/etc/skel/.local/share/wallpapers/README.md && echo "readme exists"`
  </verify>
  <done>Archiso wallpapers directory created with documentation</done>
</task>

</tasks>

<verification>
- All 10 theme files exist in archiso skeleton
- vulcan-menu in archiso has "Appearance Manager" references
- vulcan-appearance-manager.desktop exists in archiso
- Old vulcan-wallpaper-manager.desktop removed
- Wallpapers directory exists with README
</verification>

<success_criteria>
- Fresh VulcanOS install will have all 10 preset themes
- vulcan-menu "Appearance" submenu works out of box
- Appearance Manager launchable from application menu
- Wallpapers directory ready for user customization
</success_criteria>

<output>
After completion, create `.planning/phases/10-preset-themes-desktop-integration/10-07-SUMMARY.md`
</output>
